<!--
    user_profile.html

    The template file for the User Profile Page.
    Liked/Disliked music will be displayed horizontally as cards.
    The number of cards displayed will be handled programmatically.
    Currently, dummy cards are displayed for demonstration.

    Jeremy Juckett
-->
{% extends 'base.html' %}
{% load static %}

{% block title %}
    User Profile
{% endblock %}

{% block view_title %}
    User Profile
{% endblock %}

{% block content %}
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- font awesome cdn link  -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

    <!-- custom css file link  -->
    <link rel="stylesheet" href="{% static '/css/playlist-styles.css' %}">

    <!-- custom js file link  -->
    <script src="{% static '/js/script.js' %}" defer></script>
</head>

<body>
    <div class="content-wrapper">
        <div class="content">
            <!-- Profile Card -->
            <div class="card card-default card-profile">
                <div class="card-header-bg" style="background-image:url(assets/img/user/user-bg-01.jpg)"></div>
                <div class="card-body card-profile-body">
                    <div class="profile-avata">
                        {% if profile_user.profile_picture %}
                        <img class="rounded-circle" src="../images/{{profile_user.profile_picture}}"
                        style="width: 100px; height: 100px;" alt="Avatar Image">
                            {% else %}
                            <img class="rounded-circle" src="{% static 'images/user/user-md-01.jpg' %}"
                        style="width: 100px; height: 100px;" alt="Avatar Image">
                        {% endif %}
                        <span class="h5 d-block mt-3 mb-2">{{ profile_user.username }}</span>
                        <span class="d-block">{{ profile_user.user_email }}</span>
                    </div>
            
                    <ul class="nav nav-profile-follow">
                        <li class="nav-item">
                            <a class="nav-link" href="#">
                                <span class="h5 d-block">{{ friend_count }}</span>
                                <span class="text-color d-block">Friends</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">
                                <span class="h5 d-block">{{ like_count }}</span>
                                <span class="text-color d-block">Likes</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">
                                <span class="h5 d-block">{{ dislike_count }}</span>
                                <span class="text-color d-block">Dislikes</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </div> <!-- End Profile Card -->

            <!-- Liked Songs -->
            <h1 style="text-align:center">Likes</h1>
            {% for g in liked_genres %}
                <a href="#" class="badge badge-pill badge-primary">{{ g }}</a>
            {% endfor %}
            <div class="card-group">
                {% for l in liked_music %}
                <div class="card">
                <img class="card-img-top" src="{{ l.album_cover }}" alt="Album Cover">
                <div class="card-body">
                    <h4 class="card-title text-primary">{{ l.track_name }}</h4>
                    <h5>{{ l.artist_name }}</h5>
                    <h5>{{ l.track_album_name }} ({{ l.release_date }})</h5><br/>
                    <!-- Form for the likes -->
                    <form id="like-button" method="POST" action="{% url 'recommender:like_song' %}">
                        {% csrf_token %}
                        <button type="submit" >Like {{ l.likes }}</button>
                        <input type="hidden" name="like" value="{{ l.track_id }}">
                    </form>
                    <!-- Form for the dislikes -->
                    <form id="dislike-button" method="POST" action="{% url 'recommender:like_song' %}">
                        {% csrf_token %}
                        <button type="submit" >Dislike {{ l.dislikes }}</button>
                        <input type="hidden" name="dislike" value="{{ l.track_id }}">
                    </form>
                </div>
                </div>
                {% endfor %}
            </div>

            <br/>

            <!-- Disliked Songs -->
            <h1 style="text-align:center">Dislikes</h1>
            {% for g in disliked_genres %}
                <a href="#" class="badge badge-pill badge-primary">{{ g }}</a>
            {% endfor %}
            <div class="card-group">
                {% for d in disliked_music %}
                <div class="card">
                <img class="card-img-top" src="{{ d.album_cover }}" alt="Album Cover">
                <div class="card-body">
                    <h4 class="card-title text-primary">{{ d.track_name }}</h4>
                    <h5>{{ d.artist_name }}</h5>
                    <h5>{{ d.track_album_name }} ({{ d.release_date }})</h5><br/>
                    <!-- Form for the likes -->
                    <form id="like-button" method="POST" action="{% url 'recommender:like_song' %}">
                        {% csrf_token %}
                        <button type="submit" >Like {{ d.likes }}</button>
                        <input type="hidden" name="like" value="{{ d.track_id }}">
                    </form>
                    <!-- Form for the dislikes -->
                    <form id="dislike-button" method="POST" action="{% url 'recommender:like_song' %}">
                        {% csrf_token %}
                        <button type="submit" >Dislike {{ d.dislikes }}</button>
                        <input type="hidden" name="dislike" value="{{ d.track_id }}">
                    </form>
                </div>
                </div>
                {% endfor %}
            </div>
        </div> <!-- End Content -->
    </div> <!-- End Content-Wrapper -->
</body>
{% endblock %}